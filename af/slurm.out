INFO:    gocryptfs not found, will not be able to use gocryptfs
I0611 13:30:28.348334 22372705929024 templates.py:857] Using precomputed obsolete pdbs /fs/scratch/PZS1152/alphafold/alphafold/pdb_mmcif/obsolete.dat.
I0611 13:30:28.512734 22372705929024 xla_bridge.py:353] Unable to initialize backend 'tpu_driver': NOT_FOUND: Unable to find driver in registry given worker: 
I0611 13:30:29.252090 22372705929024 xla_bridge.py:353] Unable to initialize backend 'rocm': NOT_FOUND: Could not find registered platform with name: "rocm". Available platform names are: Interpreter Host CUDA
I0611 13:30:29.252412 22372705929024 xla_bridge.py:353] Unable to initialize backend 'tpu': module 'jaxlib.xla_extension' has no attribute 'get_tpu_client'
I0611 13:30:29.252476 22372705929024 xla_bridge.py:353] Unable to initialize backend 'plugin': xla_extension has no attributes named get_plugin_device_client. Compile TensorFlow with //tensorflow/compiler/xla/python:enable_plugin_device set to true (defaults to false) to enable this.
I0611 13:30:31.194994 22372705929024 robins_devious_run_alphafold_patched.py:451] Have 5 models: ['model_1_pred_0', 'model_2_pred_0', 'model_3_pred_0', 'model_4_pred_0', 'model_5_pred_0']
I0611 13:30:31.195176 22372705929024 robins_devious_run_alphafold_patched.py:468] Using random seed 547742746610899321 for the data pipeline
I0611 13:30:31.195324 22372705929024 robins_devious_run_alphafold_patched.py:196] Predicting P99999
I0611 13:30:31.239555 22372705929024 jackhmmer.py:133] Launching subprocess "/usr/bin/jackhmmer -o /dev/null -A /tmp/slurmtmp.1743955/tmp5nac5tr9/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --incE 0.0001 -E 0.0001 --cpu 8 -N 1 /fs/scratch/PZS1152/alphafold/robin_alphafold/sigmaFold/web_dir/P99999.fasta /fs/scratch/PZS1152/alphafold/alphafold/uniref90/robins_devious_taxonomy_filtered.fasta"
I0611 13:30:31.247713 22372705929024 utils.py:36] Started Jackhmmer (robins_devious_taxonomy_filtered.fasta) query
I0611 13:30:31.304769 22372705929024 utils.py:40] Finished Jackhmmer (robins_devious_taxonomy_filtered.fasta) query in 0.057 seconds
I0611 13:30:31.309286 22372705929024 jackhmmer.py:133] Launching subprocess "/usr/bin/jackhmmer -o /dev/null -A /tmp/slurmtmp.1743955/tmp9q8xvyfh/output.sto --noali --F1 0.0005 --F2 5e-05 --F3 5e-07 --incE 0.0001 -E 0.0001 --cpu 8 -N 1 /fs/scratch/PZS1152/alphafold/robin_alphafold/sigmaFold/web_dir/P99999.fasta /fs/scratch/PZS1152/alphafold/alphafold/mgnify/mgy_clusters_2022_05.fa"
I0611 13:30:31.318222 22372705929024 utils.py:36] Started Jackhmmer (mgy_clusters_2022_05.fa) query
I0611 13:37:10.992190 22372705929024 utils.py:40] Finished Jackhmmer (mgy_clusters_2022_05.fa) query in 399.674 seconds
I0611 13:37:11.081467 22372705929024 hhsearch.py:85] Launching subprocess "/usr/bin/hhsearch -i /tmp/slurmtmp.1743955/tmpmfmpfi8f/query.a3m -o /tmp/slurmtmp.1743955/tmpmfmpfi8f/output.hhr -maxseq 1000000 -d /fs/scratch/PZS1152/alphafold/alphafold/pdb70/pdb70"
I0611 13:37:11.093582 22372705929024 utils.py:36] Started HHsearch query
I0611 13:37:28.734420 22372705929024 utils.py:40] Finished HHsearch query in 17.641 seconds
I0611 13:37:28.766204 22372705929024 hhblits.py:128] Launching subprocess "/usr/bin/hhblits -i /fs/scratch/PZS1152/alphafold/robin_alphafold/sigmaFold/web_dir/P99999.fasta -cpu 4 -oa3m /tmp/slurmtmp.1743955/tmp4o3h9rl4/output.a3m -o /dev/null -n 3 -e 0.001 -maxseq 1000000 -realign_max 100000 -maxfilt 100000 -min_prefilter_hits 1000 -d /fs/scratch/PZS1152/alphafold/alphafold/bfd/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt -d /fs/scratch/PZS1152/alphafold/alphafold/uniref30/UniRef30_2021_03"
I0611 13:37:28.778802 22372705929024 utils.py:36] Started HHblits query
I0611 13:51:33.397039 22372705929024 utils.py:40] Finished HHblits query in 844.618 seconds
I0611 13:51:33.412526 22372705929024 templates.py:878] Searching for template for: MGDVEKGKKIFIMKCSQCHTVEKGGKHKTGPNLHGLFGRKTGQAPGYSYTAANKNKGIIWGEDTLMEYLENPKKYIPGTKMIFVGIKKKEERADLIAYLKKATNE
I0611 13:51:35.486242 22372705929024 templates.py:267] Found an exact template match 2ybb_Y.
I0611 13:51:35.515070 22372705929024 templates.py:267] Found an exact template match 1rap_A.
I0611 13:51:35.544133 22372705929024 templates.py:267] Found an exact template match 1ccr_A.
I0611 13:51:35.870524 22372705929024 templates.py:267] Found an exact template match 5c0z_C.
I0611 13:51:35.982910 22372705929024 templates.py:267] Found an exact template match 2yk3_C.
I0611 13:51:36.077808 22372705929024 templates.py:267] Found an exact template match 4n0k_B.
I0611 13:51:36.302445 22372705929024 templates.py:267] Found an exact template match 4ged_B.
I0611 13:51:36.333487 22372705929024 templates.py:267] Found an exact template match 1co6_A.
I0611 13:51:36.359245 22372705929024 templates.py:267] Found an exact template match 1cry_A.
I0611 13:51:36.386822 22372705929024 templates.py:267] Found an exact template match 1io3_A.
I0611 13:51:36.450603 22372705929024 templates.py:267] Found an exact template match 6gd6_A.
I0611 13:51:36.482409 22372705929024 templates.py:267] Found an exact template match 1jdl_A.
I0611 13:51:36.512626 22372705929024 templates.py:267] Found an exact template match 2bgv_X.
I0611 13:51:36.565096 22372705929024 templates.py:267] Found an exact template match 1hro_A.
I0611 13:51:36.599283 22372705929024 templates.py:267] Found an exact template match 3m97_X.
I0611 13:51:36.629865 22372705929024 templates.py:267] Found an exact template match 155c_A.
I0611 13:51:36.749415 22372705929024 templates.py:267] Found an exact template match 1ql3_A.
I0611 13:51:36.797609 22372705929024 templates.py:267] Found an exact template match 1vyd_B.
I0611 13:51:36.828078 22372705929024 templates.py:267] Found an exact template match 1cot_A.
I0611 13:51:37.936080 22372705929024 templates.py:267] Found an exact template match 1c2n_A.
I0611 13:51:37.958981 22372705929024 pipeline.py:239] Uniref90 MSA size: 1 sequences.
I0611 13:51:37.959090 22372705929024 pipeline.py:240] BFD MSA size: 1291 sequences.
I0611 13:51:37.959118 22372705929024 pipeline.py:241] MGnify MSA size: 501 sequences.
I0611 13:51:37.959142 22372705929024 pipeline.py:242] Final (deduplicated) MSA size: 1750 sequences.
I0611 13:51:37.959277 22372705929024 pipeline.py:244] Total number of templates (NB: this can include bad templates and is later filtered to top 4): 20.
I0611 13:51:37.970144 22372705929024 robins_devious_run_alphafold_patched.py:241] Running model model_1_pred_0 on P99999
W0611 13:51:38.334504 22372705929024 deprecation.py:350] From /opt/conda/lib/python3.8/site-packages/tensorflow/python/autograph/pyct/static_analysis/liveness.py:83: Analyzer.lamba_check (from tensorflow.python.autograph.pyct.static_analysis.liveness) is deprecated and will be removed after 2023-09-23.
Instructions for updating:
Lambda fuctions will be no more assumed to be used in the statement where they are used, or at least in the same block. https://github.com/tensorflow/tensorflow/issues/56089
I0611 13:51:40.009520 22372705929024 model.py:165] Running predict with shape(feat) = {'aatype': (4, 105), 'residue_index': (4, 105), 'seq_length': (4,), 'template_aatype': (4, 4, 105), 'template_all_atom_masks': (4, 4, 105, 37), 'template_all_atom_positions': (4, 4, 105, 37, 3), 'template_sum_probs': (4, 4, 1), 'is_distillation': (4,), 'seq_mask': (4, 105), 'msa_mask': (4, 508, 105), 'msa_row_mask': (4, 508), 'random_crop_to_size_seed': (4, 2), 'template_mask': (4, 4), 'template_pseudo_beta': (4, 4, 105, 3), 'template_pseudo_beta_mask': (4, 4, 105), 'atom14_atom_exists': (4, 105, 14), 'residx_atom14_to_atom37': (4, 105, 14), 'residx_atom37_to_atom14': (4, 105, 37), 'atom37_atom_exists': (4, 105, 37), 'extra_msa': (4, 5120, 105), 'extra_msa_mask': (4, 5120, 105), 'extra_msa_row_mask': (4, 5120), 'bert_mask': (4, 508, 105), 'true_msa': (4, 508, 105), 'extra_has_deletion': (4, 5120, 105), 'extra_deletion_value': (4, 5120, 105), 'msa_feat': (4, 508, 105, 49), 'target_feat': (4, 105, 22)}
I0611 13:53:02.932504 22372705929024 model.py:175] Output shape was {'distogram': {'bin_edges': (63,), 'logits': (105, 105, 64)}, 'experimentally_resolved': {'logits': (105, 37)}, 'masked_msa': {'logits': (508, 105, 23)}, 'predicted_lddt': {'logits': (105, 50)}, 'structure_module': {'final_atom_mask': (105, 37), 'final_atom_positions': (105, 37, 3)}, 'plddt': (105,), 'ranking_confidence': ()}
I0611 13:53:02.932791 22372705929024 robins_devious_run_alphafold_patched.py:253] Total JAX model model_1_pred_0 on P99999 predict time (includes compilation time, see --benchmark): 82.9s
I0611 13:53:02.945191 22372705929024 robins_devious_run_alphafold_patched.py:241] Running model model_2_pred_0 on P99999
I0611 13:53:03.879424 22372705929024 model.py:165] Running predict with shape(feat) = {'aatype': (4, 105), 'residue_index': (4, 105), 'seq_length': (4,), 'template_aatype': (4, 4, 105), 'template_all_atom_masks': (4, 4, 105, 37), 'template_all_atom_positions': (4, 4, 105, 37, 3), 'template_sum_probs': (4, 4, 1), 'is_distillation': (4,), 'seq_mask': (4, 105), 'msa_mask': (4, 508, 105), 'msa_row_mask': (4, 508), 'random_crop_to_size_seed': (4, 2), 'template_mask': (4, 4), 'template_pseudo_beta': (4, 4, 105, 3), 'template_pseudo_beta_mask': (4, 4, 105), 'atom14_atom_exists': (4, 105, 14), 'residx_atom14_to_atom37': (4, 105, 14), 'residx_atom37_to_atom14': (4, 105, 37), 'atom37_atom_exists': (4, 105, 37), 'extra_msa': (4, 1024, 105), 'extra_msa_mask': (4, 1024, 105), 'extra_msa_row_mask': (4, 1024), 'bert_mask': (4, 508, 105), 'true_msa': (4, 508, 105), 'extra_has_deletion': (4, 1024, 105), 'extra_deletion_value': (4, 1024, 105), 'msa_feat': (4, 508, 105, 49), 'target_feat': (4, 105, 22)}
I0611 13:54:26.472303 22372705929024 model.py:175] Output shape was {'distogram': {'bin_edges': (63,), 'logits': (105, 105, 64)}, 'experimentally_resolved': {'logits': (105, 37)}, 'masked_msa': {'logits': (508, 105, 23)}, 'predicted_lddt': {'logits': (105, 50)}, 'structure_module': {'final_atom_mask': (105, 37), 'final_atom_positions': (105, 37, 3)}, 'plddt': (105,), 'ranking_confidence': ()}
I0611 13:54:26.472638 22372705929024 robins_devious_run_alphafold_patched.py:253] Total JAX model model_2_pred_0 on P99999 predict time (includes compilation time, see --benchmark): 82.6s
I0611 13:54:26.492004 22372705929024 robins_devious_run_alphafold_patched.py:241] Running model model_3_pred_0 on P99999
I0611 13:54:27.436166 22372705929024 model.py:165] Running predict with shape(feat) = {'aatype': (4, 105), 'residue_index': (4, 105), 'seq_length': (4,), 'is_distillation': (4,), 'seq_mask': (4, 105), 'msa_mask': (4, 512, 105), 'msa_row_mask': (4, 512), 'random_crop_to_size_seed': (4, 2), 'atom14_atom_exists': (4, 105, 14), 'residx_atom14_to_atom37': (4, 105, 14), 'residx_atom37_to_atom14': (4, 105, 37), 'atom37_atom_exists': (4, 105, 37), 'extra_msa': (4, 5120, 105), 'extra_msa_mask': (4, 5120, 105), 'extra_msa_row_mask': (4, 5120), 'bert_mask': (4, 512, 105), 'true_msa': (4, 512, 105), 'extra_has_deletion': (4, 5120, 105), 'extra_deletion_value': (4, 5120, 105), 'msa_feat': (4, 512, 105, 49), 'target_feat': (4, 105, 22)}
I0611 13:55:31.248505 22372705929024 model.py:175] Output shape was {'distogram': {'bin_edges': (63,), 'logits': (105, 105, 64)}, 'experimentally_resolved': {'logits': (105, 37)}, 'masked_msa': {'logits': (512, 105, 23)}, 'predicted_lddt': {'logits': (105, 50)}, 'structure_module': {'final_atom_mask': (105, 37), 'final_atom_positions': (105, 37, 3)}, 'plddt': (105,), 'ranking_confidence': ()}
I0611 13:55:31.248837 22372705929024 robins_devious_run_alphafold_patched.py:253] Total JAX model model_3_pred_0 on P99999 predict time (includes compilation time, see --benchmark): 63.8s
I0611 13:55:31.265042 22372705929024 robins_devious_run_alphafold_patched.py:241] Running model model_4_pred_0 on P99999
I0611 13:55:32.033583 22372705929024 model.py:165] Running predict with shape(feat) = {'aatype': (4, 105), 'residue_index': (4, 105), 'seq_length': (4,), 'is_distillation': (4,), 'seq_mask': (4, 105), 'msa_mask': (4, 512, 105), 'msa_row_mask': (4, 512), 'random_crop_to_size_seed': (4, 2), 'atom14_atom_exists': (4, 105, 14), 'residx_atom14_to_atom37': (4, 105, 14), 'residx_atom37_to_atom14': (4, 105, 37), 'atom37_atom_exists': (4, 105, 37), 'extra_msa': (4, 5120, 105), 'extra_msa_mask': (4, 5120, 105), 'extra_msa_row_mask': (4, 5120), 'bert_mask': (4, 512, 105), 'true_msa': (4, 512, 105), 'extra_has_deletion': (4, 5120, 105), 'extra_deletion_value': (4, 5120, 105), 'msa_feat': (4, 512, 105, 49), 'target_feat': (4, 105, 22)}
I0611 13:56:35.082319 22372705929024 model.py:175] Output shape was {'distogram': {'bin_edges': (63,), 'logits': (105, 105, 64)}, 'experimentally_resolved': {'logits': (105, 37)}, 'masked_msa': {'logits': (512, 105, 23)}, 'predicted_lddt': {'logits': (105, 50)}, 'structure_module': {'final_atom_mask': (105, 37), 'final_atom_positions': (105, 37, 3)}, 'plddt': (105,), 'ranking_confidence': ()}
I0611 13:56:35.082651 22372705929024 robins_devious_run_alphafold_patched.py:253] Total JAX model model_4_pred_0 on P99999 predict time (includes compilation time, see --benchmark): 63.0s
I0611 13:56:35.095532 22372705929024 robins_devious_run_alphafold_patched.py:241] Running model model_5_pred_0 on P99999
I0611 13:56:35.877993 22372705929024 model.py:165] Running predict with shape(feat) = {'aatype': (4, 105), 'residue_index': (4, 105), 'seq_length': (4,), 'is_distillation': (4,), 'seq_mask': (4, 105), 'msa_mask': (4, 512, 105), 'msa_row_mask': (4, 512), 'random_crop_to_size_seed': (4, 2), 'atom14_atom_exists': (4, 105, 14), 'residx_atom14_to_atom37': (4, 105, 14), 'residx_atom37_to_atom14': (4, 105, 37), 'atom37_atom_exists': (4, 105, 37), 'extra_msa': (4, 1024, 105), 'extra_msa_mask': (4, 1024, 105), 'extra_msa_row_mask': (4, 1024), 'bert_mask': (4, 512, 105), 'true_msa': (4, 512, 105), 'extra_has_deletion': (4, 1024, 105), 'extra_deletion_value': (4, 1024, 105), 'msa_feat': (4, 512, 105, 49), 'target_feat': (4, 105, 22)}
I0611 13:57:39.674264 22372705929024 model.py:175] Output shape was {'distogram': {'bin_edges': (63,), 'logits': (105, 105, 64)}, 'experimentally_resolved': {'logits': (105, 37)}, 'masked_msa': {'logits': (512, 105, 23)}, 'predicted_lddt': {'logits': (105, 50)}, 'structure_module': {'final_atom_mask': (105, 37), 'final_atom_positions': (105, 37, 3)}, 'plddt': (105,), 'ranking_confidence': ()}
I0611 13:57:39.674600 22372705929024 robins_devious_run_alphafold_patched.py:253] Total JAX model model_5_pred_0 on P99999 predict time (includes compilation time, see --benchmark): 63.8s
I0611 13:57:42.845490 22372705929024 amber_minimize.py:178] alterations info: {'nonstandard_residues': [], 'removed_heterogens': set(), 'missing_residues': {}, 'missing_heavy_atoms': {}, 'missing_terminals': {<Residue 104 (GLU) of chain 0>: ['OXT']}, 'Se_in_MET': [], 'removed_chains': {0: []}}
I0611 13:57:42.904691 22372705929024 amber_minimize.py:408] Minimizing protein, attempt 1 of 100.
I0611 13:57:43.263844 22372705929024 amber_minimize.py:69] Restraining 824 / 1678 particles.
I0611 13:57:44.927251 22372705929024 amber_minimize.py:178] alterations info: {'nonstandard_residues': [], 'removed_heterogens': set(), 'missing_residues': {}, 'missing_heavy_atoms': {}, 'missing_terminals': {}, 'Se_in_MET': [], 'removed_chains': {0: []}}
I0611 13:57:46.172948 22372705929024 amber_minimize.py:500] Iteration completed: Einit 3696.21 Efinal -943.51 Time 1.28 s num residue violations 0 num residue exclusions 0 
I0611 13:57:46.212821 22372705929024 robins_devious_run_alphafold_patched.py:340] Final timings for P99999: {'features': 1266.7220180034637, 'process_features_model_1_pred_0': 2.0390219688415527, 'predict_and_compile_model_1_pred_0': 82.92354607582092, 'process_features_model_2_pred_0': 0.9337589740753174, 'predict_and_compile_model_2_pred_0': 82.59357213973999, 'process_features_model_3_pred_0': 0.9439454078674316, 'predict_and_compile_model_3_pred_0': 63.812769651412964, 'process_features_model_4_pred_0': 0.7683279514312744, 'predict_and_compile_model_4_pred_0': 63.04916548728943, 'process_features_model_5_pred_0': 0.7822487354278564, 'predict_and_compile_model_5_pred_0': 63.79670572280884, 'relax_model_2_pred_0': 6.522152662277222}
Running Alphafold with command:
export TF_FORCE_UNIFIED_MEMORY=${TF_FORCE_UNIFIED_MEMORY:-0};export XLA_PYTHON_CLIENT_MEM_FRACTION=${XLA_PYTHON_CLIENT_MEM_FRACTION:-4.0}; singularity exec --nv /apps/alphafold/2.3.2/alphafold.sif python /fs/scratch/PZS1152/alphafold/robin_alphafold/scripts/alphafold/robins_devious_run_alphafold_patched.py --data_dir=/fs/scratch/PZS1152/alphafold/alphafold/data/2.3.2 --mgnify_database_path=/fs/scratch/PZS1152/alphafold/alphafold/mgnify/mgy_clusters_2022_05.fa --obsolete_pdbs_path=/fs/scratch/PZS1152/alphafold/alphafold/pdb_mmcif/obsolete.dat --template_mmcif_dir=/fs/scratch/PZS1152/alphafold/alphafold/pdb_mmcif/mmcif_files --uniref90_database_path=/fs/scratch/PZS1152/alphafold/alphafold/uniref90/robins_devious_taxonomy_filtered.fasta --bfd_database_path=/fs/scratch/PZS1152/alphafold/alphafold/bfd/bfd_metaclust_clu_complete_id30_c90_final_seq.sorted_opt --uniref30_database_path=/fs/scratch/PZS1152/alphafold/alphafold/uniref30/UniRef30_2021_03 --pdb70_database_path=/fs/scratch/PZS1152/alphafold/alphafold/pdb70/pdb70 --model_preset=monomer --db_preset=full_dbs --fasta_paths=/fs/scratch/PZS1152/alphafold/robin_alphafold/sigmaFold/web_dir/P99999.fasta --output_dir=/fs/scratch/PZS1152/alphafold/robin_alphafold/msas/rob2 --max_template_date=2024-01-01 --use_gpu_relax=true

